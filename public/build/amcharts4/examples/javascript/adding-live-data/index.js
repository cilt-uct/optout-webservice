am4core.useTheme(am4themes_animated);var chart=am4core.create("chartdiv",am4charts.XYChart);chart.padding(0,0,0,0),chart.zoomOutButton.disabled=!0;var data=[],visits=50,i=0;for(i=0;i<=30;i++)visits-=Math.round((Math.random()<.5?1:-1)*Math.random()*5),data.push({date:(new Date).setSeconds(i-30),value:visits});chart.data=data;var dateAxis=chart.xAxes.push(new am4charts.DateAxis);dateAxis.renderer.grid.template.location=0,dateAxis.renderer.minGridDistance=30,dateAxis.dateFormats.setKey("second","ss"),dateAxis.periodChangeDateFormats.setKey("second","[bold]h:mm a"),dateAxis.periodChangeDateFormats.setKey("minute","[bold]h:mm a"),dateAxis.periodChangeDateFormats.setKey("hour","[bold]h:mm a"),dateAxis.renderer.inside=!0;var valueAxis=chart.yAxes.push(new am4charts.ValueAxis);valueAxis.tooltip.disabled=!0,valueAxis.interpolationDuration=500,valueAxis.rangeChangeDuration=500,valueAxis.renderer.inside=!0,valueAxis.renderer.minLabelPosition=.05,valueAxis.renderer.maxLabelPosition=.95;var interval,series=chart.series.push(new am4charts.LineSeries);function startInterval(){interval=setInterval((function(){visits+=Math.round((Math.random()<.5?1:-1)*Math.random()*5);var e=series.dataItems.getIndex(series.dataItems.length-1);chart.addData({date:new Date(e.dateX.getTime()+1e3),value:visits},1)}),1e3)}series.dataFields.dateX="date",series.dataFields.valueY="value",series.interpolationDuration=500,series.defaultState.transitionDuration=0,series.tensionX=.8,chart.events.on("datavalidated",(function(){dateAxis.zoom({start:1/15,end:1.2},!1,!0)})),dateAxis.interpolationDuration=500,dateAxis.rangeChangeDuration=500,document.addEventListener("visibilitychange",(function(){document.hidden?interval&&clearInterval(interval):startInterval()}),!1),startInterval(),series.fillOpacity=1;var gradient=new am4core.LinearGradient;gradient.addColor(chart.colors.getIndex(0),.2),gradient.addColor(chart.colors.getIndex(0),0),series.fill=gradient,dateAxis.renderer.labels.template.adapter.add("fillOpacity",(function(e,t){return t.dataItem.position})),dateAxis.events.on("validated",(function(){am4core.iter.each(dateAxis.renderer.labels.iterator(),(function(e){e.fillOpacity=e.fillOpacity}))})),dateAxis.renderer.labels.template.adapter.add("rotation",(function(e,t){var a=t.dataItem;return a.date&&a.date.getTime()==am4core.time.round(new Date(a.date.getTime()),"minute").getTime()?(t.horizontalCenter="left",t.verticalCenter="middle",-90):(t.horizontalCenter="middle",t.verticalCenter="bottom",0)}));var bullet=series.createChild(am4charts.CircleBullet);bullet.circle.radius=5,bullet.fillOpacity=1,bullet.fill=chart.colors.getIndex(0),bullet.isMeasured=!1,series.events.on("validated",(function(){bullet.moveTo(series.dataItems.last.point),bullet.validatePosition()}));