am4core.useTheme(am4themes_animated);var mapChart=am4core.create("chartdiv",am4maps.MapChart);try{mapChart.geodata=am4geodata_continentsLow}catch(e){mapChart.raiseCriticalError(new Error("Map geodata could not be loaded. Please download the latest amcharts geodata and extract its contents into the same directory as your amCharts files."))}mapChart.projection=new am4maps.projections.Miller,mapChart.seriesContainer.draggable=!1,mapChart.seriesContainer.resizable=!1,mapChart.minZoomLevel=1;var countriesSeries=mapChart.series.push(new am4maps.MapPolygonSeries);countriesSeries.useGeodata=!0,countriesSeries.mapPolygons.template.fill=am4core.color("#47c78a"),countriesSeries.mapPolygons.template.stroke=am4core.color("#47c78a");var colorSet=new am4core.ColorSet,polygonTemplate=countriesSeries.mapPolygons.template,nightSeries=mapChart.series.push(new am4maps.MapPolygonSeries);nightSeries.ignoreBounds=!0;var night=nightSeries.mapPolygons.create();night.fill=am4core.color("#000000"),night.fillOpacity=.35,night.interactionsEnabled=!1,night.stroke=am4core.color("#000000"),night.strokeOpacity=0;var night2=nightSeries.mapPolygons.create();night2.fill=am4core.color("#000000"),night2.fillOpacity=.4,night2.interactionsEnabled=!1,night2.stroke=am4core.color("#000000"),night2.strokeOpacity=0;var imagesSeries=mapChart.series.push(new am4maps.MapImageSeries),tooltip=imagesSeries.tooltip;tooltip.label.padding(15,15,15,15),tooltip.background.cornerRadius=25;var sun=imagesSeries.mapImages.create(),suncircle=sun.createChild(am4core.Circle);suncircle.radius=10,suncircle.fill=am4core.color("#ffba00"),suncircle.strokeOpacity=0,sun.filters.push(new am4core.BlurFilter);var graticuleSeires=mapChart.series.push(new am4maps.GraticuleSeries);graticuleSeires.mapLines.template.stroke=am4core.color("#ffffff"),graticuleSeires.fitExtent=!1;var slider=mapChart.chartContainer.createChild(am4core.Slider);function updateDateNight(e){var t=solarPosition(e);sun.latitude=t.latitude,sun.longitude=t.longitude,sun.deepInvalidate(),night.multiPolygon=am4maps.getCircle(t.longitude+180,-t.latitude,91),night2.multiPolygon=am4maps.getCircle(t.longitude+180,-t.latitude,89)}slider.start=.5,slider.valign="bottom",slider.padding(0,30,0,80),slider.background.padding(0,30,0,80),slider.marginBottom=15,slider.events.on("rangechanged",(function(){updateDateNight((new Date).getTime()+1e3*(slider.start-.5)*60*60*24*2*2)}));var offset=60*(new Date).getTimezoneOffset()*1e3;function solarPosition(e){var t=(e-Date.UTC(2e3,0,1,12))/864e5/36525,a=(am4core.time.round(new Date(e),"day",1).getTime()-e-offset)/864e5*360-180;return am4maps.geo.normalizePoint({longitude:a-equationOfTime(t)*am4core.math.DEGREES,latitude:solarDeclination(t)*am4core.math.DEGREES})}function equationOfTime(e){var t=eccentricityEarthOrbit(e),a=solarGeometricMeanAnomaly(e),r=solarGeometricMeanLongitude(e),i=Math.tan(obliquityCorrection(e)/2);return(i*=i)*Math.sin(2*r)-2*t*Math.sin(a)+4*t*i*Math.sin(a)*Math.cos(2*r)-.5*i*i*Math.sin(4*r)-1.25*t*t*Math.sin(2*a)}function solarDeclination(e){return Math.asin(Math.sin(obliquityCorrection(e))*Math.sin(solarApparentLongitude(e)))}function solarApparentLongitude(e){return solarTrueLongitude(e)-(.00569+.00478*Math.sin((125.04-1934.136*e)*am4core.math.RADIANS))*am4core.math.RADIANS}function solarTrueLongitude(e){return solarGeometricMeanLongitude(e)+solarEquationOfCenter(e)}function solarGeometricMeanAnomaly(e){return(357.52911+e*(35999.05029-1537e-7*e))*am4core.math.RADIANS}function solarGeometricMeanLongitude(e){var t=(280.46646+e*(36000.76983+3032e-7*e))%360;return(t<0?t+360:t)/180*Math.PI}function solarEquationOfCenter(e){var t=solarGeometricMeanAnomaly(e);return(Math.sin(t)*(1.914602-e*(.004817+14e-6*e))+Math.sin(t+t)*(.019993-101e-6*e)+289e-6*Math.sin(t+t+t))*am4core.math.RADIANS}function obliquityCorrection(e){return meanObliquityOfEcliptic(e)+.00256*Math.cos((125.04-1934.136*e)*am4core.math.RADIANS)*am4core.math.RADIANS}function meanObliquityOfEcliptic(e){return(23+(26+(21.448-e*(46.815+e*(59e-5-.001813*e)))/60)/60)*am4core.math.RADIANS}function eccentricityEarthOrbit(e){return.016708634-e*(42037e-9+1.267e-7*e)}