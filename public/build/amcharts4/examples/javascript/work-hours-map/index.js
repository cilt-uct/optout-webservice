am4core.useTheme(am4themes_animated);var container=am4core.create("chartdiv",am4core.Container);container.layout="vertical",container.width=am4core.percent(100),container.height=am4core.percent(100);var mapChart=container.createChild(am4maps.MapChart);mapChart.panBehavior="rotateLongLat";var button=mapChart.createChild(am4core.Button);button.align="right",button.marginTop=40,button.marginRight=40,button.valign="top",button.label.text="Show Globe",button.events.on("hit",(function(){"Show Globe"==button.label.text?(button.label.text="Show Map",mapChart.projection=new am4maps.projections.Orthographic):(button.label.text="Show Globe",mapChart.projection=new am4maps.projections.Miller)}));try{mapChart.geodata=am4geodata_continentsLow}catch(e){mapChart.raiseCriticalError(new Error("Map geodata could not be loaded. Please download the latest amcharts geodata and extract its contents into the same directory as your amCharts files."))}mapChart.fontSize=11,mapChart.projection=new am4maps.projections.Miller,mapChart.panBehavior="rotateLongLat",mapChart.seriesContainer.draggable=!1,mapChart.seriesContainer.resizable=!1,mapChart.minZoomLevel=1;var countriesSeries=mapChart.series.push(new am4maps.MapPolygonSeries);countriesSeries.useGeodata=!0,countriesSeries.mapPolygons.template.fill=am4core.color("#47c78a"),countriesSeries.mapPolygons.template.stroke=am4core.color("#47c78a");var colorSet=new am4core.ColorSet,polygonTemplate=countriesSeries.mapPolygons.template,nightSeries=mapChart.series.push(new am4maps.MapPolygonSeries);nightSeries.ignoreBounds=!0;var night=nightSeries.mapPolygons.create();night.fill=am4core.color("#000000"),night.fillOpacity=.35,night.interactionsEnabled=!1,night.stroke=am4core.color("#000000"),night.strokeOpacity=0;var imagesSeries=mapChart.series.push(new am4maps.MapImageSeries),tooltip=imagesSeries.tooltip;tooltip.label.padding(15,15,15,15),tooltip.background.cornerRadius=25;var sun=imagesSeries.mapImages.create(),suncircle=sun.createChild(am4core.Circle);suncircle.radius=10,suncircle.fill=am4core.color("#ffba00"),suncircle.strokeOpacity=0,sun.filters.push(new am4core.BlurFilter);var graticuleSeires=mapChart.series.push(new am4maps.GraticuleSeries);graticuleSeires.mapLines.template.stroke=am4core.color("#ffffff"),graticuleSeires.fitExtent=!1;var slider=container.createChild(am4core.Slider);slider.start=.5,slider.padding(0,30,0,80),slider.background.padding(0,30,0,80),slider.marginBottom=15,slider.events.on("rangechanged",(function(){updateDateNight((new Date).getTime()+1e3*(slider.start-.5)*60*60*24*2*2)}));var lineSeries=mapChart.series.push(new am4maps.MapLineSeries);lineSeries.mapLines.template.strokeDasharray="4,4",lineSeries.mapLines.template.stroke=am4core.color("#ffffff");var nineLine=lineSeries.mapLines.create(),fiveLine=lineSeries.mapLines.create(),nineImage=imagesSeries.mapImages.create(),nineLabel=nineImage.createChild(am4core.Label);nineLabel.fill=am4core.color("#ffffff"),nineLabel.text="~9 AM",nineLabel.paddingLeft=10,nineLabel.verticalCenter="middle";var fiveImage=imagesSeries.mapImages.create(),fiveLabel=fiveImage.createChild(am4core.Label);function updateDateNight(e){var a=solarPosition(e);sun.latitude=a.latitude,sun.longitude=a.longitude,sun.deepInvalidate();for(var t=a.longitude-45,i=a.longitude+75,r=89.999,n=[],o=t;o>i-360;o-=10){var l=o;l>180&&(l-=360),n.push([[[o-10,-r],[o-10,0],[o-10,r],[o,r],[o,0],[o,-r]]])}night.multiPolygon=n,nineLine.multiLine=[[[t,r],[t,-r]]],fiveLine.multiLine=[[[i,r],[i,-r]]],fiveImage.longitude=i,fiveImage.latitude=sun.latitude,nineImage.longitude=t,nineImage.latitude=sun.latitude}fiveLabel.fill=am4core.color("#ffffff"),fiveLabel.text="~5 PM",fiveLabel.paddingRight=10,fiveLabel.horizontalCenter="right",fiveLabel.verticalCenter="middle";var offset=60*(new Date).getTimezoneOffset()*1e3;function solarPosition(e){var a=(e-Date.UTC(2e3,0,1,12))/864e5/36525,t=(am4core.time.round(new Date(e),"day",1).getTime()-e-offset)/864e5*360-180;return am4maps.geo.normalizePoint({longitude:t-equationOfTime(a)*am4core.math.DEGREES,latitude:solarDeclination(a)*am4core.math.DEGREES})}function equationOfTime(e){var a=eccentricityEarthOrbit(e),t=solarGeometricMeanAnomaly(e),i=solarGeometricMeanLongitude(e),r=Math.tan(obliquityCorrection(e)/2);return(r*=r)*Math.sin(2*i)-2*a*Math.sin(t)+4*a*r*Math.sin(t)*Math.cos(2*i)-.5*r*r*Math.sin(4*i)-1.25*a*a*Math.sin(2*t)}function solarDeclination(e){return Math.asin(Math.sin(obliquityCorrection(e))*Math.sin(solarApparentLongitude(e)))}function solarApparentLongitude(e){return solarTrueLongitude(e)-(.00569+.00478*Math.sin((125.04-1934.136*e)*am4core.math.RADIANS))*am4core.math.RADIANS}function solarTrueLongitude(e){return solarGeometricMeanLongitude(e)+solarEquationOfCenter(e)}function solarGeometricMeanAnomaly(e){return(357.52911+e*(35999.05029-1537e-7*e))*am4core.math.RADIANS}function solarGeometricMeanLongitude(e){var a=(280.46646+e*(36000.76983+3032e-7*e))%360;return(a<0?a+360:a)/180*Math.PI}function solarEquationOfCenter(e){var a=solarGeometricMeanAnomaly(e);return(Math.sin(a)*(1.914602-e*(.004817+14e-6*e))+Math.sin(a+a)*(.019993-101e-6*e)+289e-6*Math.sin(a+a+a))*am4core.math.RADIANS}function obliquityCorrection(e){return meanObliquityOfEcliptic(e)+.00256*Math.cos((125.04-1934.136*e)*am4core.math.RADIANS)*am4core.math.RADIANS}function meanObliquityOfEcliptic(e){return(23+(26+(21.448-e*(46.815+e*(59e-5-.001813*e)))/60)/60)*am4core.math.RADIANS}function eccentricityEarthOrbit(e){return.016708634-e*(42037e-9+1.267e-7*e)}