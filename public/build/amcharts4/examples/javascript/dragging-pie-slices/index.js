am4core.useTheme(am4themes_animated);var data=[{country:"Dummy",disabled:!0,litres:1e3,color:am4core.color("#dadada"),opacity:.3,strokeDasharray:"4,4"},{country:"Lithuania",litres:501.9},{country:"Estonia",litres:301.9},{country:"Ireland",litres:201.1},{country:"Germany",litres:165.8},{country:"Australia",litres:139.9},{country:"Austria",litres:128.3}],container=am4core.create("chartdiv",am4core.Container);container.width=am4core.percent(100),container.height=am4core.percent(100),container.layout="horizontal",container.events.on("maxsizechanged",(function(){chart1.zIndex=0,separatorLine.zIndex=1,dragText.zIndex=2,chart2.zIndex=3}));var chart1=container.createChild(am4charts.PieChart);chart1.hiddenState.properties.opacity=0,chart1.data=data,chart1.radius=am4core.percent(70),chart1.innerRadius=am4core.percent(40),chart1.zIndex=1;var series1=chart1.series.push(new am4charts.PieSeries);series1.dataFields.value="litres",series1.dataFields.category="country",series1.colors.step=2;var sliceTemplate1=series1.slices.template;sliceTemplate1.cornerRadius=5,sliceTemplate1.draggable=!0,sliceTemplate1.inert=!0,sliceTemplate1.propertyFields.fill="color",sliceTemplate1.propertyFields.fillOpacity="opacity",sliceTemplate1.propertyFields.stroke="color",sliceTemplate1.propertyFields.strokeDasharray="strokeDasharray",sliceTemplate1.strokeWidth=1,sliceTemplate1.strokeOpacity=1;var zIndex=5;sliceTemplate1.events.on("down",(function(e){e.target.toFront(),e.target.dataItem.component.chart.zIndex=zIndex++})),series1.labels.template.propertyFields.disabled="disabled",series1.ticks.template.propertyFields.disabled="disabled",sliceTemplate1.states.getKey("active").properties.shiftRadius=0,sliceTemplate1.events.on("dragstop",(function(e){handleDragStop(e)}));var separatorLine=container.createChild(am4core.Line);separatorLine.x1=0,separatorLine.y2=300,separatorLine.strokeWidth=3,separatorLine.stroke=am4core.color("#dadada"),separatorLine.valign="middle",separatorLine.strokeDasharray="5,5";var dragText=container.createChild(am4core.Label);dragText.text="Drag slices over the line",dragText.rotation=90,dragText.valign="middle",dragText.align="center",dragText.paddingBottom=5;var chart2=container.createChild(am4charts.PieChart);chart2.hiddenState.properties.opacity=0,chart2.radius=am4core.percent(70),chart2.data=data,chart2.innerRadius=am4core.percent(40),chart2.zIndex=1;var series2=chart2.series.push(new am4charts.PieSeries);series2.dataFields.value="litres",series2.dataFields.category="country",series2.colors.step=2;var sliceTemplate2=series2.slices.template;function handleDragStop(e){var t,a,r,i,s=e.target;-1!=series1.slices.indexOf(s)?(r=s,i=series2.dataItems.getIndex(s.dataItem.index).slice):-1!=series2.slices.indexOf(s)&&(r=series1.dataItems.getIndex(s.dataItem.index).slice,i=s),t=r.dataItem,a=i.dataItem;var o=am4core.utils.spritePointToSvg({x:0,y:0},series1.slicesContainer),n=am4core.utils.spritePointToSvg({x:0,y:0},series2.slicesContainer),l=am4core.utils.svgPointToSprite(o,series2.slicesContainer),d=am4core.utils.svgPointToSprite(n,series1.slicesContainer),c=am4core.utils.spritePointToSvg({x:s.tooltipX,y:s.tooltipY},s);if(s==r)if(c.x>container.pixelWidth/2){t.value;t.hide(),r.animate([{property:"x",to:d.x},{property:"y",to:d.y}],400).events.on("animationprogress",(function(e){r.hideTooltip()})),i.x=0,i.y=0,a.show()}else r.animate([{property:"x",to:0},{property:"y",to:0}],400);if(s==i)if(c.x<container.pixelWidth/2){a.value;a.hide(),i.animate([{property:"x",to:l.x},{property:"y",to:l.y}],400).events.on("animationprogress",(function(e){i.hideTooltip()})),r.x=0,r.y=0,t.show()}else i.animate([{property:"x",to:0},{property:"y",to:0}],400);toggleDummySlice(series1),toggleDummySlice(series2),series1.hideTooltip(),series2.hideTooltip()}function toggleDummySlice(e){for(var t=!0,a=1;a<e.dataItems.length;a++){var r=e.dataItems.getIndex(a);r.slice.visible&&!r.slice.isHiding&&(t=!1)}var i=e.dataItems.getIndex(0);t?i.show():i.hide()}sliceTemplate2.copyFrom(sliceTemplate1),series2.labels.template.propertyFields.disabled="disabled",series2.ticks.template.propertyFields.disabled="disabled",series2.events.on("datavalidated",(function(){var e=series2.dataItems.getIndex(0);e.show(0),e.slice.draggable=!1,e.slice.tooltipText=void 0;for(var t=1;t<series2.dataItems.length;t++)series2.dataItems.getIndex(t).hide(0)})),series1.events.on("datavalidated",(function(){var e=series1.dataItems.getIndex(0);e.hide(0),e.slice.draggable=!1,e.slice.tooltipText=void 0}));