var chart=am4core.create("chartdiv",am4charts.XYChart);chart.padding(0,15,0,15),chart.colors.step=3;for(var data=[],price1=1e3,price2=2e3,price3=3e3,quantity=1e3,i=15;i<3e3;i++)(price1+=Math.round((Math.random()<.5?1:-1)*Math.random()*100))<100&&(price1=100),(price2+=Math.round((Math.random()<.5?1:-1)*Math.random()*100))<100&&(price2=100),(price3+=Math.round((Math.random()<.5?1:-1)*Math.random()*100))<100&&(price3=100),(quantity+=Math.round((Math.random()<.5?1:-1)*Math.random()*500))<0&&(quantity*=-1),data.push({date:new Date(2e3,0,i),price1,price2,price3,quantity});chart.data=data,chart.leftAxesContainer.layout="vertical";var dateAxis=chart.xAxes.push(new am4charts.DateAxis);dateAxis.renderer.grid.template.location=0,dateAxis.renderer.ticks.template.length=8,dateAxis.renderer.ticks.template.strokeOpacity=.1,dateAxis.renderer.grid.template.disabled=!0,dateAxis.renderer.ticks.template.disabled=!1,dateAxis.renderer.ticks.template.strokeOpacity=.2,dateAxis.renderer.minLabelPosition=.01,dateAxis.renderer.maxLabelPosition=.99,dateAxis.keepSelection=!0,dateAxis.groupData=!0,dateAxis.minZoomCount=5;var valueAxis=chart.yAxes.push(new am4charts.ValueAxis);valueAxis.tooltip.disabled=!0,valueAxis.zIndex=1,valueAxis.renderer.baseGrid.disabled=!0,valueAxis.height=am4core.percent(65),valueAxis.renderer.gridContainer.background.fill=am4core.color("#000000"),valueAxis.renderer.gridContainer.background.fillOpacity=.05,valueAxis.renderer.inside=!0,valueAxis.renderer.labels.template.verticalCenter="bottom",valueAxis.renderer.labels.template.padding(2,2,2,2),valueAxis.renderer.fontSize="0.8em";var series1=chart.series.push(new am4charts.LineSeries);series1.dataFields.dateX="date",series1.dataFields.valueY="price1",series1.dataFields.valueYShow="changePercent",series1.tooltipText="{name}: {valueY.changePercent.formatNumber('[#0c0]+#.00|[#c00]#.##|0')}%",series1.name="Stock A",series1.tooltip.getFillFromObject=!1,series1.tooltip.getStrokeFromObject=!0,series1.tooltip.background.fill=am4core.color("#fff"),series1.tooltip.background.strokeWidth=2,series1.tooltip.label.fill=series1.stroke;var series2=chart.series.push(new am4charts.LineSeries);series2.dataFields.dateX="date",series2.dataFields.valueY="price2",series2.dataFields.valueYShow="changePercent",series2.tooltipText="{name}: {valueY.changePercent.formatNumber('[#0c0]+#.00|[#c00]#.##|0')}%",series2.name="Stock B",series2.tooltip.getFillFromObject=!1,series2.tooltip.getStrokeFromObject=!0,series2.tooltip.background.fill=am4core.color("#fff"),series2.tooltip.background.strokeWidth=2,series2.tooltip.label.fill=series2.stroke;var series3=chart.series.push(new am4charts.LineSeries);series3.dataFields.dateX="date",series3.dataFields.valueY="price3",series3.dataFields.valueYShow="changePercent",series3.tooltipText="{name}: {valueY.changePercent.formatNumber('[#0c0]+#.00|[#c00]#.##|0')}%",series3.name="Stock C",series3.tooltip.getFillFromObject=!1,series3.tooltip.getStrokeFromObject=!0,series3.tooltip.background.fill=am4core.color("#fff"),series3.tooltip.background.strokeWidth=2,series3.tooltip.label.fill=series3.stroke;var valueAxis2=chart.yAxes.push(new am4charts.ValueAxis);valueAxis2.tooltip.disabled=!0,valueAxis2.height=am4core.percent(35),valueAxis2.zIndex=3,valueAxis2.marginTop=30,valueAxis2.renderer.baseGrid.disabled=!0,valueAxis2.renderer.inside=!0,valueAxis2.renderer.labels.template.verticalCenter="bottom",valueAxis2.renderer.labels.template.padding(2,2,2,2),valueAxis2.renderer.fontSize="0.8em",valueAxis2.renderer.gridContainer.background.fill=am4core.color("#000000"),valueAxis2.renderer.gridContainer.background.fillOpacity=.05;var volumeSeries=chart.series.push(new am4charts.StepLineSeries);volumeSeries.fillOpacity=1,volumeSeries.fill=series1.stroke,volumeSeries.stroke=series1.stroke,volumeSeries.dataFields.dateX="date",volumeSeries.dataFields.valueY="quantity",volumeSeries.yAxis=valueAxis2,volumeSeries.tooltipText="Volume: {valueY.value}",volumeSeries.name="Series 2",volumeSeries.groupFields.valueY="sum",volumeSeries.tooltip.label.fill=volumeSeries.stroke,chart.cursor=new am4charts.XYCursor;var scrollbarX=new am4charts.XYChartScrollbar;scrollbarX.series.push(series1),scrollbarX.marginBottom=20;var sbSeries=scrollbarX.scrollbarChart.series.getIndex(0);sbSeries.dataFields.valueYShow=void 0,chart.scrollbarX=scrollbarX;var zoomTimeout,inputFieldFormat="yyyy-MM-dd";function updateFields(){var e=dateAxis.minZoomed+.5*am4core.time.getDuration(dateAxis.mainBaseInterval.timeUnit,dateAxis.mainBaseInterval.count);document.getElementById("fromfield").value=chart.dateFormatter.format(e,inputFieldFormat),document.getElementById("tofield").value=chart.dateFormatter.format(new Date(dateAxis.maxZoomed),inputFieldFormat)}function updateZoom(){zoomTimeout&&clearTimeout(zoomTimeout),zoomTimeout=setTimeout((function(){var e=document.getElementById("fromfield").value,t=document.getElementById("tofield").value;if(!(e.length<inputFieldFormat.length||t.length<inputFieldFormat.length)){var a=chart.dateFormatter.parse(e,inputFieldFormat),r=chart.dateFormatter.parse(t,inputFieldFormat);a&&r&&dateAxis.zoomToDates(a,r)}}),500)}function zoomToDates(e){var t=dateAxis.groupMin.day1,a=dateAxis.groupMax.day1;dateAxis.keepSelection=!0,dateAxis.zoom({start:(e.getTime()-t)/(a-t),end:1})}document.getElementById("b1m").addEventListener("click",(function(){var e=dateAxis.groupMax.day1,t=new Date(e);am4core.time.add(t,"month",-1),zoomToDates(t)})),document.getElementById("b3m").addEventListener("click",(function(){var e=dateAxis.groupMax.day1,t=new Date(e);am4core.time.add(t,"month",-3),zoomToDates(t)})),document.getElementById("b6m").addEventListener("click",(function(){var e=dateAxis.groupMax.day1,t=new Date(e);am4core.time.add(t,"month",-6),zoomToDates(t)})),document.getElementById("b1y").addEventListener("click",(function(){var e=dateAxis.groupMax.day1,t=new Date(e);am4core.time.add(t,"year",-1),zoomToDates(t)})),document.getElementById("bytd").addEventListener("click",(function(){var e=dateAxis.groupMax.day1,t=new Date(e);am4core.time.round(t,"year",1),zoomToDates(t)})),document.getElementById("bmax").addEventListener("click",(function(){var e=dateAxis.groupMin.day1;zoomToDates(new Date(e))})),dateAxis.events.on("selectionextremeschanged",(function(){updateFields()})),dateAxis.events.on("extremeschanged",updateFields),document.getElementById("fromfield").addEventListener("keyup",updateZoom),document.getElementById("tofield").addEventListener("keyup",updateZoom);