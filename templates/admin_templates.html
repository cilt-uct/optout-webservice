<script type="text/x-tmpl" id="tmpl-courses">
    {% $.each(o.courses, function( i, course ) { %}
        <div class="row no-gutters course-title">
            <div class="col-sm-8">
                <h6>{%=course.courseCode%}, {%=course.year%}</h6>
            </div>
            <div class="col-sm-4" style="padding-top:0.6em;">
                <label>Opted Out</label>
                <label class="right" id="chk_opt_{%=course.courseCode%}_date">
                    {% if (course.updatedBy != null) { %}{%=course.updatedBy%} - {%=course.updatedAt%}{% } %}
                </label>
                <div class="switch">
                    <input type="checkbox" id="chk_opt_{%=course.courseCode%}" data-course="{%=course.courseCode%}" data-hash="{%=course.hash%}" {% if (course.optoutStatus==1) { %}checked{% } %}/><label id="toggle_opt_{%=course.courseCode%}" for="chk_opt_{%=course.courseCode%}">Toggle</label>
                </div>
            </div>
        </div>
        <div class="row no-gutters course-details">
            <div class="col-sm-8">
                <div class="form-group row">
                    <label for="inp_{%=course.courseCode%}_EID" class="col-sm-3 col-form-label">EID</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="inp_{%=course.courseCode%}_EID" placeholder="EID" data-dept="{%=o.dept%}"
                                    data-type="course" data-field="convenorEid" data-course="{%=course.courseCode%}" data-hash="{%=o.hash%}" 
                                    data-old="{%=course.convenor.eid%}" value="{%=course.convenor.eid%}"/>
                        <span class="loader">
                            <span></span>
                            <span></span>
                            <span></span>
                        </span>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="inp_{%=course.courseCode%}_convenorName" class="col-sm-3 col-form-label">Convenor Name</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="inp_{%=course.courseCode%}_convenorName" placeholder="Convenor Name" data-dept="{%=o.dept%}"
                                    data-type="course" data-field="convenorName" data-course="{%=course.courseCode%}" data-hash="{%=o.hash%}" 
                                    data-old="{%=course.convenor.name%}" value="{%=course.convenor.name%}"/>
                        <span class="loader">
                            <span></span>
                            <span></span>
                            <span></span>
                        </span>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="inp_{%=course.courseCode%}_convenorEmail" class="col-sm-3 col-form-label">Convenor Mail</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="inp_{%=course.courseCode%}_convenorEmail" placeholder="Convenor Mail" data-dept="{%=o.dept%}"
                                    data-type="course" data-field="convenorEmail" data-course="{%=course.courseCode%}" data-hash="{%=o.hash%}" 
                                    data-old="{%=course.convenor.email.toLowerCase()%}" value="{%=course.convenor.email.toLowerCase()%}"/>
                        <span class="loader">
                            <span></span>
                            <span></span>
                            <span></span>
                        </span>
                    </div>
                </div>                           
                <!--{%=JSON.stringify(course.convenor)%}-->
            </div>
        </div>
        <hr/>
    {% }); %}
</script>

<script type="text/x-tmpl" id="tmpl-courses-loading">
    <div class="text-info loading">
        <i class="fa fa-circle-o-notch fa-spin fa-2x fa-fw"></i>
        <span>Loading course information...</span>
    </div>
</script>

<script type="text/x-tmpl" id="tmpl-courses-error">
    <div class="text-danger">
        <span>Error loading courses</span>
    </div>
</script>